var qt=Object.defineProperty;var Nt=(a,g,B)=>g in a?qt(a,g,{enumerable:!0,configurable:!0,writable:!0,value:B}):a[g]=B;var w=(a,g,B)=>Nt(a,typeof g!="symbol"?g+"":g,B);(function(){"use strict";const a=window.Vue;function g(){return window.panel}function B(){return g().api}const U=()=>window.panel.plugins.viewButtons!==void 0;function ke(){return U()?new Proxy({},{get(){throw new Error("Vuex store is not available. Are you using Kirby 5? Use the `useContent` composable instead.")}}):g().app.$store}function Z(){const r=g(),s=ke(),n=U();if(n&&!("diff"in r.content))throw new Error("This plugin requires Kirby 5.0.0-rc.1 or higher. Please update your Kirby installation.");const e=C(n?()=>r.content.version("changes"):()=>s.getters["content/values"]()),t=C(n?()=>r.content.diff():()=>s.getters["content/changes"]()),o=C(n?()=>r.content.hasDiff():()=>s.getters["content/hasChanges"]()),i=n?r.content:new Proxy({},{get(){return()=>{}}});return{content:i,currentContent:e,contentChanges:t,hasChanges:o,update:async(c,u=!0)=>{if(!n&&c)for(const[h,d]of Object.entries(c))s.dispatch("content/update",[h,d]);const p=i.merge(c);u&&await i.save(p)}}}function Ae(){const r=g();function s(n){return!n||typeof n=="string"?n:n[r.translation.code]??Object.values(n)[0]}return{t:s}}function we(){const r=B();return{load:({parent:n,name:e})=>r.get(`${n}/sections/${e}`)}}const xe={error:0,warn:1,log:2,info:3,success:3};function Le(r){const s=new Ce;return new Proxy({},{get(n,e){return(...t)=>{s.log({level:xe[e],type:e,tag:r,args:t})}}})}class Ce{constructor(){w(this,"defaultColor","#7f8c8d");w(this,"levelColorMap",{0:"#c0392b",1:"#f39c12",3:"#00BCD4"});w(this,"typeColorMap",{success:"#2ecc71"})}log(s){const n=Ee(s.level),e=s.type==="log"?"":s.type,t=s.tag||"",i=`
background: ${this.typeColorMap[s.type]||this.levelColorMap[s.level]||this.defaultColor};
border-radius: 0.5em;
color: white;
font-weight: bold;
padding: 2px 0.5em;
`.trimStart(),l=`%c${[t,e].filter(Boolean).join(":")}`;typeof s.args[0]=="string"?n(`${l}%c ${s.args[0]}`,i,"",...s.args.slice(1)):n(l,i,...s.args)}}function Ee(r){return r<1?console.error:console.log}const F=[],G=new Map;async function Re(r){if(!Array.isArray(r))throw new TypeError(`Expected an array, got ${typeof r}`);for(const s of r)F.some(n=>n.filename===s.filename)||F.push(s)}function ze(r){if(F.length===0)throw new Error("Plugin assets not registered");const s=F.find(n=>n.filename===r);if(!s)throw new Error(`Plugin asset "${r}" not found`);return s}async function I(r){if(r.endsWith(".js")||(r+=".js"),G.has(r))return G.get(r);const n=await import(ze(r).url);return G.set(r,n),n}const C=a.computed;a.customRef,a.defineAsyncComponent,a.defineComponent,a.effectScope,a.getCurrentInstance,a.getCurrentScope,a.h,a.inject,a.isProxy,a.isReactive,a.isReadonly,a.isRef,a.isShallow,a.markRaw,a.nextTick,a.onActivated,a.onBeforeMount,a.onBeforeUnmount,a.onBeforeUpdate,a.onDeactivated,a.onErrorCaptured;const Oe=a.onMounted;a.onRenderTracked,a.onRenderTriggered,a.onScopeDispose,a.onServerPrefetch,a.onUnmounted,a.onUpdated,a.provide,a.proxyRefs,a.reactive,a.readonly;const v=a.ref;a.shallowReactive,a.shallowReadonly,a.shallowRef,a.toRaw,a.toRef,a.toRefs,a.triggerRef;const X=a.unref;a.useAttrs,a.useCssModule,a.useCssVars,a.useListeners,a.useSlots;const Be=a.watch;a.watchEffect,a.watchPostEffect,a.watchSyncEffect;const Te={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function K(r,s,n,e,t,o,i,l){var c=typeof r=="function"?r.options:r;return s&&(c.render=s,c.staticRenderFns=n,c._compiled=!0),{exports:r,options:c}}const W={en:{"modal.info":"Thanks for purchasing {label}! Please enter your email address and order ID to activate your license.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Find your order number</a> on Lemon Squeezy or <a href="mailto:hello@kirby.tools">contact us</a> if you cannot find it.',"modal.error.required.fields":"Email address and order ID are required","modal.error.invalid.unauthorized":"Email address or order ID is incorrect","modal.error.invalid.licenseKey":"License key invalid for this plugin","modal.error.incompatible":"License key invalid for this plugin version","modal.error.upgradeable":"License key invalid for this plugin version. Upgrade now on https://hub.kirby.tools.","modal.error.activated":"License key already activated",activate:"Activate",activated:"Plugin activated",buy:"Buy a license",upgrade:"Upgrade"},de:{"modal.info":"Dankeschön für den Kauf von {label}! Bitte gib deine E-Mail-Adresse und Bestellnummer ein, um deine Lizenz zu aktivieren.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Finde deine Bestellnummer</a> bei Lemon Squeezy oder <a href="mailto:hello@kirby.tools">kontaktiere uns</a>, wenn du sie nicht finden kannst.',"modal.error.required.fields":"E-Mail-Adresse und Bestellnummer sind notwendig","modal.error.invalid.unauthorized":"E-Mail-Adresse oder Bestellnummer ist falsch","modal.error.invalid.licenseKey":"Lizenzschlüssel ungültig für dieses Plugin","modal.error.incompatible":"Lizenzschlüssel ungültig für diese Plugin-Version","modal.error.upgradeable":"Lizenzschlüssel ungültig für diese Plugin-Version. Aktualisiere jetzt auf https://hub.kirby.tools.","modal.error.activated":"Lizenzschlüssel bereits aktiviert",activate:"Aktivieren",activated:"Plugin aktiviert",buy:"Lizenz kaufen",upgrade:"Upgrade"},fr:{"modal.info":"Merci d'avoir acheté {label} ! Veuillez saisir votre adresse e-mail et votre numéro de commande pour activer votre licence.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Trouvez votre numéro de commande</a> sur Lemon Squeezy ou <a href="mailto:hello@kirby.tools">contactez-nous</a> si vous ne le trouvez pas.',"modal.error.required.fields":"Adresse e-mail et numéro de commande requis","modal.error.invalid.unauthorized":"Adresse e-mail ou numéro de commande incorrect","modal.error.invalid.licenseKey":"Clé de licence invalide pour ce plugin","modal.error.incompatible":"Clé de licence invalide pour cette version du plugin","modal.error.upgradeable":"Clé de licence invalide pour cette version du plugin. Mettez à niveau maintenant sur https://hub.kirby.tools.","modal.error.activated":"Clé de licence déjà activée",activate:"Activer",activated:"Plugin activé",buy:"Acheter une licence",upgrade:"Upgrade"},nl:{"modal.info":"Bedankt voor het kopen van {label}! Voer je e-mailadres en bestelnummer in om je licentie te activeren.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Vind je bestelnummer</a> op Lemon Squeezy of <a href="mailto:hello@kirby.tools">neem contact met ons op</a> als je het niet kunt vinden.',"modal.error.required.fields":"E-mailadres en bestelnummer zijn verplicht","modal.error.invalid.unauthorized":"E-mailadres of bestelnummer is onjuist","modal.error.invalid.licenseKey":"Licentiesleutel ongeldig voor dit plug-in","modal.error.incompatible":"Licentiesleutel ongeldig voor deze plug-inversie","modal.error.upgradeable":"Licentiesleutel ongeldig voor deze plug-inversie. Upgrade nu op https://hub.kirby.tools.","modal.error.activated":"Licentiesleutel al geactiveerd",activate:"Activeren",activated:"Plugin geactiveerd",buy:"Koop een licentie",upgrade:"Upgrade"}},je=["localhost","127.0.0.1","[::1]"],$e=["local","test","ddev.site"];function T(r="",s){var t;const n=window.panel.translation.code,e=((t=W==null?void 0:W[n])==null?void 0:t[r])??r;return s?Ie(e,s):e}function Ie(r,s,n){return r.replace(/\{(\w+)\}/g,(e,t)=>s[t]||t)}function Pe(){const{hostname:r}=window.location,s=je.includes(r),n=$e.some(e=>r.endsWith(`.${e}`));return s||n}const Q={Unauthorized:"modal.error.invalid.unauthorized","License key not valid for this plugin":"modal.error.invalid.licenseKey","License key not valid for this plugin version":"modal.error.incompatible","License key not valid for this plugin version, please upgrade your license":"modal.error.upgradeable","License key already activated":"modal.error.activated"};function Me(r){const s=g();return{isLocalhost:Pe(),assertActivationIntegrity:async({component:o,licenseStatus:i})=>{if(X(i)==="active")return;const l=X(o);if(!(l!=null&&l.$el)||window.getComputedStyle(l.$el).display==="none"||window.getComputedStyle(l.$el).visibility==="hidden"||window.getComputedStyle(l.$el).opacity==="0")throw new Error("Are you trying to hide the activation buttons? Please buy a license.")},openLicenseModal:()=>{let o=!1;const{label:i}=r,l={info:{type:"info",text:T("modal.info",{label:i})},email:{label:s.t("email"),type:"email"},orderId:{label:"Order ID",type:"text",help:T("modal.fields.orderId.help",{label:i})}};return new Promise(c=>{s.dialog.open({component:"k-form-dialog",props:{submitButton:{icon:"check",theme:"love",text:T("activate",{label:i})},fields:l},on:{close:()=>{c({isLicenseActive:o})},submit:async u=>{o=await He(u,r),o&&(s.dialog.close(),s.notification.success(T("activated")))}}})})}}}async function He(r,s){const n=g(),{email:e,orderId:t}=r;if(!e||!t)return n.notification.error(T("modal.error.required.fields")),!1;try{const o=await n.api.post(`${s.apiNamespace}/activate`,{email:e,orderId:Number(t)});if((o==null?void 0:o.status)!=="ok")throw new Error("Failed to activate license key");return!0}catch(o){const i=o.message;return n.notification.error(Q[i]?T(Q[i]):i),!1}}const Fe=Vue.defineComponent({__name:"LicensingButtonGroup",props:{label:{type:String,required:!0},apiNamespace:{type:String,required:!0},licenseStatus:{type:String,required:!0},pricingUrl:{type:String,required:!0}},setup(r){const s=r,{openLicenseModal:n,assertActivationIntegrity:e}=Me({label:s.label,apiNamespace:s.apiNamespace}),t=v(s.licenseStatus),o=v();Oe(()=>{e({component:o,licenseStatus:s.licenseStatus})});async function i(){const{isLicenseActive:l}=await n();l&&window.location.reload()}return{__sfc:!0,props:s,openLicenseModal:n,assertActivationIntegrity:e,currentLicenseStatus:t,licenseButtonGroup:o,handleRegistration:i,t:T}}});var Ke=function(){var s=this,n=s._self._c,e=s._self._setupProxy;return e.currentLicenseStatus!=="active"?n("k-button-group",{ref:"licenseButtonGroup",attrs:{layout:"collapsed"}},[n("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",link:e.currentLicenseStatus==="upgradeable"?"https://hub.kirby.tools":s.pricingUrl,target:"_blank",text:e.currentLicenseStatus==="upgradeable"?e.t("upgrade"):e.t("buy")}}),n("k-button",{attrs:{theme:"love",variant:"filled",size:"xs",icon:"key",text:e.t("activate")},on:{click:function(t){return e.handleRegistration()}}})],1):s._e()},qe=[],Ne=K(Fe,Ke,qe);const De=Ne.exports;let Ue;function ee(){return Ue??(Ue=Le("seo-audit"))}const te=["TaxonomyTextLengthAssessment","UrlLengthAssessment","UrlStopWordsAssessment","SingleH1Assessment"],Ge={FleschReadingEaseAssessment:"fleschReading",SentenceLengthInTextAssessment:"sentenceLength"},se=["FunctionWordsInKeyphraseAssessment","IntroductionKeywordAssessment","KeyphraseLengthAssessment","KeywordDensityAssessment","KeyphraseDistributionAssessment","MetaDescriptionKeywordAssessment","SubheadingsKeywordAssessment","TitleKeywordAssessment","UrlKeywordAssessment"],We={WordComplexityAssessment:["de","en","es","fr"],KeyphraseDistributionAssessment:["ar","cs","de","el","en","es","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],SentenceLengthInDescriptionAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],SentenceLengthInTextAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],PassiveVoiceAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","nl","no","pl","pt","ru","sk","sv","tr"],TransitionWordsAssessment:["ar","ca","cs","de","el","en","es","fa","fr","he","hu","id","it","nl","no","pl","pt","ru","sk","sv","tr"],FunctionWordsInKeyphraseAssessment:["ar","cs","de","el","en","es","fa","fr","he","hu","id","it","ja","nl","no","pl","pt","ru","sk","sv","tr"],FleschReadingEaseAssessment:["de","en","es","fr","it","nl","pt","ru"]},P=Object.freeze({af:"af-ZA",ar:"ar-SA",az:"az-Latn-AZ",be:"be-BY",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",dv:"dv-MV",el:"el-GR",en:"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fa:"fa-IR",fi:"fi-FI",fo:"fo-FO",fr:"fr-FR",gl:"gl-ES",gu:"gu-IN",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",hy:"hy-AM",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",ka:"ka-GE",kk:"kk-KZ",kn:"kn-IN",ko:"ko-KR",kok:"kok-IN",ky:"ky-KG",lt:"lt-LT",lv:"lv-LV",mk:"mk-MK",mn:"mn-MN",mr:"mr-IN",ms:"ms-MY",nl:"nl-NL",no:"nb-NO",pa:"pa-IN",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sa:"sa-IN",sk:"sk-SK",sl:"sl-SI",sq:"sq-AL",sr:"sr-Latn-CS",sv:"sv-SE",sw:"sw-KE",syr:"syr-SY",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",tt:"tt-RU",uk:"uk-UA",ur:"ur-PK",uz:"uz-Latn-UZ",vi:"vi-VN"}),Ve="__seo-audit__/context",Ye=["error","warn","info","debug"],Je="kirby$seo-audit$";let q,M;function Ze(){return q||M||(M=window.panel.api.get(Ve).then(r=>(Re(r.assets),q=r,M=void 0,q)),M)}async function ne(r){const s=await r;return s.default||s}class re extends Error{constructor({locale:s,assessment:n,compatibleLocales:e}){super(`Locale ${s.toUpperCase()} is not supported by the assessment ${n}.`),this.locale=s,this.assessment=n,this.compatibleLocales=e}}var oe={};Object.defineProperty(oe,"__esModule",{value:!0});var V=oe.default={sentenceLength:{recommendedWordCount:20,slightlyTooMany:25,farTooMany:30},fleschReading:{borders:{veryEasy:90,easy:80,fairlyEasy:70,okay:60,fairlyDifficult:50,difficult:30,veryDifficult:0},scores:{veryEasy:9,easy:9,fairlyEasy:9,okay:9,fairlyDifficult:6,difficult:3,veryDifficult:3}}};const Xe={AltAttributeAssessment:{_label:"Alt-Attribut für Bilder",na:"Der Text enthält keine Bilder.",none:"Keines der {imagesWithoutAltAttribute} Bilder enthält ein Attribut für alternativen Text. Fügen Sie sie hinzu!",some:"Einige der {imagesWithoutAltAttribute} Bilder enthalten ein Attribut für alternativen Text. Fügen Sie sie hinzu!",every:"Alle Bilder enthalten ein Attribut für alternativen Text. Gute Arbeit!"},HeadingStructureOrderAssessment:{_label:"Reihenfolge der Überschriften",sequential:"Die Überschriftenstruktur ist in sequenzieller Reihenfolge. Gute Arbeit!",nonSequential:"Die Überschriftenstruktur ist nicht in sequenzieller Reihenfolge. Korrigieren Sie Ihre Überschriftenstruktur!"},SingleH1Assessment:{_label:"Einzelne H1",one:"Der Text enthält einen H1-Tag. Gute Arbeit!",multiple:"Der Text enthält mehrere H1-Tags. Überdenken Sie Ihre Überschriftenstruktur!",none:"Der Text enthält keinen H1-Tag. Fügen Sie ihn hinzu!"}},Qe={AltAttributeAssessment:{_label:"Image alt attribute",na:"The text doesn't contain any images.",none:"None of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",some:"Some of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",every:"All images contain an alternative text attribute. Good job!"},HeadingStructureOrderAssessment:{_label:"Heading structure",sequential:"The heading structure is in sequential order. Good job!",nonSequential:"The heading structure is not in sequential order. Fix your heading structure!"},SingleH1Assessment:{_label:"Single H1",one:"The text contains a single H1 tag. Good job!",multiple:"The text contains multiple H1 tags. Rethink your heading structure!",none:"The text contains no H1 tag. Add it!"}},et={AltAttributeAssessment:{_label:"Alt-tekst voor afbeeldingen",na:"De tekst bevat geen afbeeldingen.",none:"Geen van de {imagesWithoutAltAttribute} afbeeldingen bevat alt-tekst. Voeg ze toe!",some:"Sommige van de {imagesWithoutAltAttribute} afbeeldingen bevatten alt-tekst. Voeg ze toe!",every:"Alle afbeeldingen bevatten alt-tekst. Goed gedaan!"},HeadingStructureOrderAssessment:{_label:"Kopstructuur volgorde",sequential:"De kopstructuur is in opeenvolgende volgorde. Goed gedaan!",nonSequential:"De kopstructuur is niet in opeenvolgende volgorde. Corrigeer je kopstructuur!"},SingleH1Assessment:{_label:"Enkele H1",one:"De tekst bevat één H1-tag. Goed gedaan!",multiple:"De tekst bevat meerdere H1-tags. Herzie je kopstructuur!",none:"De tekst bevat geen H1-tag. Voeg er een toe!"}};function tt({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(t=>t.tagName.toLowerCase()==="h1"?[t]:[...t.querySelectorAll("h1")]);return{score:e.length===1?9:3,translation:e.length===1?"one":e.length>1?"multiple":"none"}}function st({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(i=>i.tagName.toLowerCase()==="img"?[i]:[...i.querySelectorAll("img")]);if(e.length===0)return{score:9,translation:"na"};const o=e.filter(i=>i.getAttribute("alt")===null).length;return{score:o===e.length||o>0?3:9,translation:o===e.length?"none":o>0?"some":"every",...o>0&&{context:{imagesWithoutAltAttribute:o}}}}function nt({htmlDocument:r,contentSelector:s}){const e=[...r.querySelectorAll(s)].flatMap(l=>["h1","h2","h3","h4","h5","h6"].includes(l.tagName.toLowerCase())?[l]:[...l.querySelectorAll("h1, h2, h3, h4, h5, h6")]);let t=0;const o=[];for(const l of e){const c=Number.parseInt(l.tagName.substring(1),10);c-t>1&&o.push(l),t=c}const i=o.length===0;return{score:i?9:3,translation:i?"sequential":"nonSequential",...!i&&{details:{text:`<ul>${o.map(l=>`<li><strong>${l.tagName}</strong>: ${l.innerText}</li>`).join("")}</ul>`}}}}function ie(r,s,n){if(!r)return n;let e,t;if(Array.isArray(s)?e=[...s]:typeof s=="string"?e=s.split("."):typeof s=="symbol"&&(e=[s]),!Array.isArray(e))throw new TypeError(`Expected props to be an array, a string or a symbol, got ${typeof e}`);for(;e.length;)if(t=e.shift(),!r||(r=r[t],r===void 0))return n;return r}function rt(r,s,n){return r.replace(/\{(\w+)\}/g,(e,t)=>s[t.toLowerCase()]||t)}const ae={de:Xe,en:Qe,nl:et},ot={seo:{AltAttributeAssessment:st,HeadingStructureOrderAssessment:nt,SingleH1Assessment:tt}};function it({htmlDocument:r,contentSelector:s,assessments:n,locale:e}){const t=ae[e]||ae.en,o={};for(const[i,l]of Object.entries(ot)){const c=[];for(const[u,p]of Object.entries(l)){if(n.length>0&&!n.includes(u.toLowerCase()))continue;const{score:h,translation:d,context:f={},details:x}=p({htmlDocument:r,contentSelector:s}),_=ie(t,`${u}.${d}`);if(!_)continue;const S=ie(t,`${u}._label`,u),L=Object.fromEntries(Object.entries(f).map(([k,E])=>[k.toLowerCase(),E]));c.push({score:h,rating:le(h),text:`${S}: ${rt(_,L)}`,details:x})}o[i]=c}return o}async function at(r,s){const n=await I("yoastseo"),e=Object.fromEntries(Object.entries(We).map(([t,o])=>[t.toLowerCase(),o]));for(const t of Object.values(n.assessments))for(const o of Object.keys(t)){if(te.includes(o)||!s.keyword&&s.assessments.length===0&&se.includes(o)||s.assessments.length>0&&!s.assessments.includes(o.toLowerCase()))continue;const i=e[o.toLowerCase()];if(!(!i||i.includes(r)))return{assessment:o,compatibleLocales:i}}}async function lt({htmlDocument:r,contentSelector:s,options:n,translations:e}){const t=await I("yoastseo"),{Jed:o}=await I("jed"),i=await ne(I("string-pixel-width")),l=ce(r,s),c=new t.Paper(l,{keyword:n.keyword,synonyms:n.synonyms.join(","),url:new URL(n.url).pathname,permalink:n.url,title:n.title,titleWidth:n.title?i(n.title,{font:"arial",size:20}):void 0,description:n.description,locale:n.langCulture.replace("-","_")}),u=new t.Researcher(c),p=new o({domain:"js-text-analysis",locale_data:{"js-text-analysis":e||{"":{}}}}),h=Object.entries(t.assessments).reduce((d,[f,x])=>{for(const[_,S]of Object.entries(x))if(!te.includes(_)&&!(!n.keyword&&n.assessments.length===0&&se.includes(_))&&!(n.assessments.length>0&&!n.assessments.includes(_.toLowerCase()))){if(typeof S=="object"&&Object.prototype.hasOwnProperty.call(S,"getResult")){const L=S.getResult(c,u,p);d[f].push(L)}else if(typeof S=="function"){const L=Ge[_],k=(V==null?void 0:V[L])||{},E=new S(k).getResult(c,u,p);d[f].push(E)}}return d},{seo:[],readability:[]});for(const d of Object.keys(h))h[d]=h[d].filter(f=>f.text).map(f=>({score:f.score,rating:le(f.score),text:f.text}));return h}function le(r){return r===-1?"error":r===0?"feedback":r<=4?"bad":r<=7?"ok":r>7?"good":""}async function ct(r){var i,l,c;const n=new DOMParser().parseFromString(r,"text/html");for(const u of Array.from(n.body.querySelectorAll("script, style")))u.remove();let e=n.documentElement.lang??P.en;e.includes("-")||(e=(P==null?void 0:P[e.toLowerCase()])??P.en);const t=n.title||((i=n.querySelector("h1"))==null?void 0:i.innerText)||((l=n.querySelector("h2"))==null?void 0:l.innerText)||"",o=((c=n.querySelector('meta[name="description"]'))==null?void 0:c.content)||"";return{htmlDocument:n,locale:e,title:t,description:o}}function ce(r,s){const n=r.querySelectorAll(s);return Array.from(n).map(e=>e.innerHTML).join(`
`)}function ut(){const r=g();Z();const s=ee();return{generateReport:async(e,t,o)=>{const i=await ne(I("yoastseo-translations"));if(o.logLevel>1){t&&s.info("Content selector:",t);const d=e.querySelectorAll(t),f=ce(e,t);s.info("Selected elements:",d),s.info("Selected content:",f)}o.assessments=o.assessments.map(d=>{let f=d.toLowerCase();return f.endsWith("assessment")||(f+="assessment"),f});const l=r.translation.code,c={seo:[],readability:[]},u=it({htmlDocument:e,contentSelector:t,assessments:o.assessments,locale:l});for(const[d,f]of Object.entries(u))c[d]=c[d].concat(f);const p=await at(l,o);if(p)throw new re({...p,locale:l});const h=await lt({htmlDocument:e,contentSelector:t,options:o,translations:i[l]});for(const[d,f]of Object.entries(h))c[d]=c[d].concat(f);return c}}}const ue=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function dt(r,s){s?s={...ue,...s}:s=ue;const n=de(s);return n.dispatch(r),n.toString()}const ft=Object.freeze(["prototype","__proto__","constructor"]);function de(r){let s="",n=new Map;const e=t=>{s+=t};return{toString(){return s},getContext(){return n},dispatch(t){return r.replacer&&(t=r.replacer(t)),this[t===null?"null":typeof t](t)},object(t){if(t&&typeof t.toJSON=="function")return this.object(t.toJSON());const o=Object.prototype.toString.call(t);let i="";const l=o.length;l<10?i="unknown:["+o+"]":i=o.slice(8,l-1),i=i.toLowerCase();let c=null;if((c=n.get(t))===void 0)n.set(t,n.size);else return this.dispatch("[CIRCULAR:"+c+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(t))return e("buffer:"),e(t.toString("utf8"));if(i!=="object"&&i!=="function"&&i!=="asyncfunction")this[i]?this[i](t):r.ignoreUnknown||this.unkown(t,i);else{let u=Object.keys(t);r.unorderedObjects&&(u=u.sort());let p=[];r.respectType!==!1&&!pe(t)&&(p=ft),r.excludeKeys&&(u=u.filter(d=>!r.excludeKeys(d)),p=p.filter(d=>!r.excludeKeys(d))),e("object:"+(u.length+p.length)+":");const h=d=>{this.dispatch(d),e(":"),r.excludeValues||this.dispatch(t[d]),e(",")};for(const d of u)h(d);for(const d of p)h(d)}},array(t,o){if(o=o===void 0?r.unorderedArrays!==!1:o,e("array:"+t.length+":"),!o||t.length<=1){for(const c of t)this.dispatch(c);return}const i=new Map,l=t.map(c=>{const u=de(r);u.dispatch(c);for(const[p,h]of u.getContext())i.set(p,h);return u.toString()});return n=i,l.sort(),this.array(l,!1)},date(t){return e("date:"+t.toJSON())},symbol(t){return e("symbol:"+t.toString())},unkown(t,o){if(e(o),!!t&&(e(":"),t&&typeof t.entries=="function"))return this.array(Array.from(t.entries()),!0)},error(t){return e("error:"+t.toString())},boolean(t){return e("bool:"+t)},string(t){e("string:"+t.length+":"),e(t)},function(t){e("fn:"),pe(t)?this.dispatch("[native]"):this.dispatch(t.toString()),r.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(t.name)),r.respectFunctionProperties&&this.object(t)},number(t){return e("number:"+t)},xml(t){return e("xml:"+t.toString())},null(){return e("Null")},undefined(){return e("Undefined")},regexp(t){return e("regex:"+t.toString())},uint8array(t){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},uint8clampedarray(t){return e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},int8array(t){return e("int8array:"),this.dispatch(Array.prototype.slice.call(t))},uint16array(t){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},int16array(t){return e("int16array:"),this.dispatch(Array.prototype.slice.call(t))},uint32array(t){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},int32array(t){return e("int32array:"),this.dispatch(Array.prototype.slice.call(t))},float32array(t){return e("float32array:"),this.dispatch(Array.prototype.slice.call(t))},float64array(t){return e("float64array:"),this.dispatch(Array.prototype.slice.call(t))},arraybuffer(t){return e("arraybuffer:"),this.dispatch(new Uint8Array(t))},url(t){return e("url:"+t.toString())},map(t){e("map:");const o=[...t];return this.array(o,r.unorderedSets!==!1)},set(t){e("set:");const o=[...t];return this.array(o,r.unorderedSets!==!1)},file(t){return e("file:"),this.dispatch([t.name,t.size,t.type,t.lastModfied])},blob(){if(r.ignoreUnknown)return e("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return e("domwindow")},bigint(t){return e("bigint:"+t.toString())},process(){return e("process")},timer(){return e("timer")},pipe(){return e("pipe")},tcp(){return e("tcp")},udp(){return e("udp")},tty(){return e("tty")},statwatcher(){return e("statwatcher")},securecontext(){return e("securecontext")},connection(){return e("connection")},zlib(){return e("zlib")},context(){return e("context")},nodescript(){return e("nodescript")},httpparser(){return e("httpparser")},dataview(){return e("dataview")},signal(){return e("signal")},fsevent(){return e("fsevent")},tlswrap(){return e("tlswrap")}}}const fe="[native code] }",pt=fe.length;function pe(r){return typeof r!="function"?!1:Function.prototype.toString.call(r).slice(-pt)===fe}class R{constructor(s,n){w(this,"words");w(this,"sigBytes");s=this.words=s||[],this.sigBytes=n===void 0?s.length*4:n}toString(s){return(s||ht).stringify(this)}concat(s){if(this.clamp(),this.sigBytes%4)for(let n=0;n<s.sigBytes;n++){const e=s.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=e<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<s.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=s.words[n>>>2];return this.sigBytes+=s.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new R([...this.words])}}const ht={stringify(r){const s=[];for(let n=0;n<r.sigBytes;n++){const e=r.words[n>>>2]>>>24-n%4*8&255;s.push((e>>>4).toString(16),(e&15).toString(16))}return s.join("")}},gt={stringify(r){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[];for(let e=0;e<r.sigBytes;e+=3){const t=r.words[e>>>2]>>>24-e%4*8&255,o=r.words[e+1>>>2]>>>24-(e+1)%4*8&255,i=r.words[e+2>>>2]>>>24-(e+2)%4*8&255,l=t<<16|o<<8|i;for(let c=0;c<4&&e*8+c*6<r.sigBytes*8;c++)n.push(s.charAt(l>>>6*(3-c)&63))}return n.join("")}},mt={parse(r){const s=r.length,n=[];for(let e=0;e<s;e++)n[e>>>2]|=(r.charCodeAt(e)&255)<<24-e%4*8;return new R(n,s)}},yt={parse(r){return mt.parse(unescape(encodeURIComponent(r)))}};class vt{constructor(){w(this,"_data",new R);w(this,"_nDataBytes",0);w(this,"_minBufferSize",0);w(this,"blockSize",512/32)}reset(){this._data=new R,this._nDataBytes=0}_append(s){typeof s=="string"&&(s=yt.parse(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_doProcessBlock(s,n){}_process(s){let n,e=this._data.sigBytes/(this.blockSize*4);s?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const t=e*this.blockSize,o=Math.min(t*4,this._data.sigBytes);if(t){for(let i=0;i<t;i+=this.blockSize)this._doProcessBlock(this._data.words,i);n=this._data.words.splice(0,t),this._data.sigBytes-=o}return new R(n,o)}}class bt extends vt{update(s){return this._append(s),this._process(),this}finalize(s){s&&this._append(s)}}const he=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],_t=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],j=[];class St extends bt{constructor(){super(...arguments);w(this,"_hash",new R([...he]))}reset(){super.reset(),this._hash=new R([...he])}_doProcessBlock(n,e){const t=this._hash.words;let o=t[0],i=t[1],l=t[2],c=t[3],u=t[4],p=t[5],h=t[6],d=t[7];for(let f=0;f<64;f++){if(f<16)j[f]=n[e+f]|0;else{const z=j[f-15],H=(z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3,O=j[f-2],$=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;j[f]=H+j[f-7]+$+j[f-16]}const x=u&p^~u&h,_=o&i^o&l^i&l,S=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),L=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),k=d+L+x+_t[f]+j[f],E=S+_;d=h,h=p,p=u,u=c+k|0,c=l,l=i,i=o,o=k+E|0}t[0]=t[0]+o|0,t[1]=t[1]+i|0,t[2]=t[2]+l|0,t[3]=t[3]+c|0,t[4]=t[4]+u|0,t[5]=t[5]+p|0,t[6]=t[6]+h|0,t[7]=t[7]+d|0}finalize(n){super.finalize(n);const e=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(t+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function kt(r){return new St().finalize(r).toString(gt)}function At(r,s={}){const n=typeof r=="string"?r:dt(r,s);return kt(n).slice(0,10)}function wt(...r){return`${Je}${At([...r])}`}const xt={__name:"SeoRatingBubble",props:{rating:{type:String,required:!0}},setup(r){return{__sfc:!0,COLOR_MAP:{good:"green",ok:"orange",bad:"red"}}}};var Lt=function(){var s=this,n=s._self._c,e=s._self._setupProxy;return n("div",{staticClass:"ksr-mt-[0.375em] ksr-h-[12px] ksr-w-[12px] ksr-rounded-full",style:{backgroundColor:`var(--color-${e.COLOR_MAP[s.rating]??"gray"}-600)`}},[n("span",{staticClass:"ksr-sr-only"},[s._v(s._s(s.rating))])])},Ct=[],Et=K(xt,Lt,Ct);const Rt=Et.exports,zt={__name:"SeoResultEntry",props:{result:{type:Object,required:!0},links:{type:Boolean,default:!0}},setup(r){const s=r,n=g(),e=C(()=>{const o=s.result.text.replace(/!$/,".");return s.links?o:t(o)});function t(o){return new DOMParser().parseFromString(o,"text/html").body.textContent||""}return{__sfc:!0,props:s,panel:n,parseText:e,stripTags:t,SeoRatingBubble:Rt}}};var Ot=function(){var s=this,n=s._self._c,e=s._self._setupProxy;return n("div",{staticClass:"ksr-flex ksr-items-start ksr-gap-2"},[n(e.SeoRatingBubble,{staticClass:"ksr-mx-1 ksr-shrink-0",attrs:{rating:s.result.rating}}),n("div",[n("div",{domProps:{innerHTML:s._s(e.parseText)}}),s.result.details?n("details",[n("summary",[s._v(s._s(e.panel.t("johannschopplich.seo-audit.issues")))]),n("div",{staticClass:"ksr-mb-1 ksr-rounded-[var(--rounded)] ksr-bg-[var(--color-border)] ksr-py-0.5",domProps:{innerHTML:s._s(s.result.details.text)}})]):s._e()])],1)},Bt=[],Tt=K(zt,Ot,Bt);const jt=Tt.exports,ge={...Te},$t=Object.assign({inheritAttrs:!1},{__name:"SeoAudit",props:ge,setup(r){const s=r,n=U(),e=g(),t=B(),o=ee(),{t:i}=Ae(),{generateReport:l}=ut(),c=wt(e.view.path);let u;const p=v(),h=v(),d=v(),f=v(),x=v(),_=v(),S=v(),L=v(),k=v(),E=v(),z=v(!1),H=v(!1),O=v(),$=v(),{currentContent:Y}=Z(),me=C(()=>h.value||Y.value[d.value]||""),ye=C(()=>{if(!f.value&&!x.value)return[];const m=f.value||Y.value[x.value];return Array.isArray(m)?m:typeof m=="string"?m.split(",").map(y=>y.trim()):[]});Be(()=>e.language.code,()=>{J()}),J(!0);const{format:Ft}=new Intl.DateTimeFormat(e.translation.code.replace("_","-"),{dateStyle:"short",timeStyle:"short"});async function J(m=!1){const{load:y}=we(),[A,b]=await Promise.all([Ze(),y({parent:s.parent,name:s.name})]);if(m){if(p.value=i(b.label)||e.t("johannschopplich.seo-audit.label"),d.value=b.keyphraseField,x.value=b.synonymsField,_.value=b.assessments,S.value=b.contentSelector,L.value=b.links,k.value=b.persisted,E.value=Ye.indexOf(A.config.logLevel??b.logLevel),O.value=A.licenseStatus,k.value){const N=JSON.parse(localStorage.getItem(c));N&&($.value=N)}z.value=!0}h.value=b.keyphrase,f.value=b.synonyms,u=(await t.get(e.view.path,{select:"previewUrl"})).previewUrl}async function Kt(){if(!u){e.notification.error(e.t("johannschopplich.seo-audit.error.missingPreviewUrl"));return}const m=u;e.isLoading=!0,H.value=!0;try{const y=await be(m),{htmlDocument:A,locale:b,title:_e,description:N}=await ct(y),D=await l(A,S.value,{assessments:_.value,logLevel:E.value,url:m,title:_e,description:N,langCulture:b,keyword:me.value,synonyms:ye.value});for(const Se of Object.keys(D))D[Se]=ve(D[Se]);$.value={result:D,timestamp:Date.now()},k.value&&localStorage.setItem(c,JSON.stringify($.value))}catch(y){console.error(y),y instanceof re?e.notification.error(e.t("johannschopplich.seo-audit.error.incompatibleLocale",{locale:y.locale.toUpperCase(),assessment:y.assessment,compatibleLocales:y.compatibleLocales.map(A=>A.toUpperCase()).join(", ")})):e.notification.error(e.t("johannschopplich.seo-audit.analyze.error"))}e.isLoading=!1,H.value=!1,e.notification.success({icon:"check",message:e.t("johannschopplich.seo-audit.analyze.success")})}function ve(m){return m.toSorted((y,A)=>y.rating==="feedback"?-1:A.rating==="feedback"?1:y.score<A.score?-1:1)}async function be(m){if(location.origin===new URL(m).origin){const b=await fetch(m);return b.ok||o.warn(`Response status code ${b.status} for URL ${m} is an indication that the error page is being analyzed.`),await b.text()}const{code:y,html:A}=await t.post("__seo-audit__/proxy",{url:m});return y!==200&&o.warn(`Response status code ${y} for URL ${m} is an indication that the error page is being analyzed.`),A}return{__sfc:!0,propsDefinition:ge,props:s,_isKirby5:n,panel:e,api:t,logger:o,t:i,generateReport:l,storageKey:c,previewUrl:u,label:p,keyphrase:h,keyphraseField:d,synonyms:f,synonymsField:x,assessments:_,contentSelector:S,links:L,persisted:k,logLevel:E,isInitialized:z,isGenerating:H,licenseStatus:O,report:$,currentContent:Y,resolvedKeyphrase:me,resolvedSynonyms:ye,format:Ft,updateSectionData:J,analyze:Kt,sortResults:ve,fetchHtml:be,LicensingButtonGroup:De,SeoResultEntry:jt}}});var It=function(){var s=this,n=s._self._c,e=s._self._setupProxy;return e.isInitialized?n("k-section",{attrs:{label:e.label}},[e.licenseStatus!==void 0?n("template",{slot:"options"},[n(e.LicensingButtonGroup,{attrs:{label:"Kirby SEO Audit","api-namespace":"__seo-audit__","license-status":e.licenseStatus,"pricing-url":"https://kirby.tools/seo-audit/buy"}})],1):s._e(),n("div",{staticClass:"ksr-space-y-4"},[n("k-button-group",{attrs:{layout:"collapsed"}},[n("k-button",{attrs:{icon:e.isGenerating?"loader":"seo-audit-analyze",text:e.panel.t("johannschopplich.seo-audit.analyze"),variant:"filled",theme:"positive",disabled:e.isGenerating},on:{click:function(t){return e.analyze()}}})],1),e.report?n("div",[n("k-box",{class:[e.isGenerating&&"ksr-cusor-wait ksr-pointer-events-none ksr-animate-pulse"],style:e._isKirby5?{"--box-color-text":"light-dark(var(--theme-color-900), var(--color-gray-200))","--box-color-back":"light-dark(var(--theme-color-back), var(--color-gray-850))"}:void 0,attrs:{theme:"passive"}},[n("k-text",{staticClass:"ksr-space-y-4",class:[e.isGenerating&&"ksr-opacity-50"],style:{"--link-color":"var(--color-text)","--link-color-hover":"light-dark(var(--color-blue-800), var(--color-blue-500))"}},[e.report.result.seo.length>0?n("div",s._l(e.report.result.seo,function(t,o){return n("div",{key:o},[n(e.SeoResultEntry,{attrs:{result:t,links:e.links}})],1)}),0):s._e(),e.report.result.readability.length>0?n("div",[n("k-label",{staticClass:"ksr-mb-1",style:{color:"var(--color-text)"}},[s._v(" "+s._s(e.panel.t("johannschopplich.seo-audit.readability"))+" ")]),s._l(e.report.result.readability,function(t,o){return n("div",{key:o},[n(e.SeoResultEntry,{attrs:{result:t,links:e.links}})],1)})],2):s._e()])],1),n("k-box",{staticClass:"ksr-border-transparent",attrs:{theme:"empty",icon:"clock"}},[s._v(" "+s._s(e.format(e.report.timestamp))+" ")])],1):s._e()],1)],2):s._e()},Pt=[],Mt=K($t,It,Pt);const Ht=Mt.exports;window.panel.plugin("johannschopplich/seo-audit",{sections:{"seo-audit":Ht},icons:{"seo-audit-analyze":'<path d="M8 3a7 7 0 0 0 0 14h1.07a7.06 7.06 0 0 1 0-2H8A5 5 0 0 1 8 5h8a5 5 0 0 1 4.9 6a7.021 7.021 0 0 1 1.426 2A7 7 0 0 0 16 3zm8 10a3 3 0 1 0 0 6a3 3 0 0 0 0-6m-5 3a5 5 0 1 1 9.172 2.757l2.535 2.536l-1.414 1.414l-2.536-2.535A5 5 0 0 1 11 16" />'}})})();
